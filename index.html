<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#ec4899" />
    <meta name="description" content="Planner Pessoal da Carollina - Organiza√ß√£o e Amor" />
    <title>Planner da Carollina üå∏ Meu Amor</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üíñ</text></svg>">
    
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
    
   <style>
/* ================================================
   Vari√°veis Globais e Temas
================================================ */
:root {
  --primary: #4361ee;
  --secondary: #3f37c9;
  --accent: #4895ef;
  --bg-light: #f8f9fa;
  --bg-lighter: #ffffff;
  --text-dark: #1b263b;
  --text-light: #ffffff;
  --card-bg: #ffffff;
  --hover-border: #4361ee;
  --shadow: 0 4px 12px rgba(67, 97, 238, 0.15);
  --gradient: linear-gradient(135deg, #4361ee, #4895ef);
}

/* Tema Carollina Love */
[data-theme="carollina"] {
  --primary: #ec4899;
  --secondary: #a855f7;
  --bg-light: #fbcfe8;
  --bg-lighter: #e9d5ff;
  --text-dark: #334155;
  --text-light: #ffffff;
  --card-bg: #ffffff;
  --hover-border: #ec4899;
  --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  --gradient: linear-gradient(135deg, var(--bg-light) 0%, var(--bg-lighter) 100%);
}

/* Tema Hello Kitty Dream */
[data-theme="hello-kitty"] {
  --primary: #ff69b4;
  --secondary: #ff1493;
  --bg-light: #fff0f5;
  --bg-lighter: #ffe4e1;
  --text-dark: #3a3a3a;
  --text-light: #ffffff;
  --card-bg: rgba(255, 255, 255, 0.85);
  --hover-border: #ff69b4;
  --shadow: 0 4px 12px rgba(255, 105, 180, 0.2);
  --gradient: none;
  background: url("hellokitty.jpg") no-repeat center center fixed;
  background-size: cover;
}

/* Tema Batman Knight */
[data-theme="batman"] {
  --primary: #ffb81f;
  --secondary: #57606f;
  --bg-light: #1c1c1c;
  --bg-lighter: #000000;
  --text-dark: #f0f0f0;
  --text-light: #1c1c1c;
  --card-bg: rgba(45, 45, 45, 0.85);
  --hover-border: #ffb81f;
  --shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
  --gradient: none;
  background: url("batman.jpg") no-repeat center center fixed;
  background-size: cover;
}

/* ================================================
   Reset e Estilos Gerais
================================================ */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Quicksand', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
  background: var(--gradient);
  min-height: 100vh;
  color: var(--text-dark);
  line-height: 1.6;
  position: relative;
  transition: background 0.5s ease, color 0.5s ease;
}

/* Ajustes espec√≠ficos para tema Batman */
[data-theme="batman"] body {
  color: var(--text-dark);
}

[data-theme="batman"] .header-content h1,
[data-theme="batman"] .header-content p,
[data-theme="batman"] .date-display,
[data-theme="batman"] .nav-btn:not(.active),
[data-theme="batman"] input,
[data-theme="batman"] select,
[data-theme="batman"] textarea,
[data-theme="batman"] .task-text,
[data-theme="batman"] .calendar-day {
  color: var(--text-dark) !important;
}

/* ================================================
   Layout e Estrutura
================================================ */
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 1rem;
}

/* Header */
header, nav, .main-content, .motivational-message, .theme-selector-card {
  background: var(--card-bg);
  border-radius: 20px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  box-shadow: var(--shadow);
  transition: background 0.5s ease, box-shadow 0.5s ease;
}

header {
  text-align: center;
  position: relative;
  overflow: hidden;
}

.header-content h1 {
  color: var(--primary);
  font-size: 2rem;
  margin-bottom: 0.5rem;
  font-weight: 800;
  letter-spacing: 0.05em;
}

.header-content p {
  color: var(--secondary);
  font-size: 1rem;
  font-style: italic;
}

.date-display {
  background: var(--bg-light);
  color: var(--primary);
  padding: 0.5rem 1rem;
  border-radius: 50px;
  margin-top: 0.5rem;
  display: inline-block;
  font-weight: 600;
  letter-spacing: 0.02em;
}

/* Elementos Decorativos */
.flower {
  position: absolute;
  width: 30px;
  height: 30px;
  font-size: 20px;
  line-height: 30px;
  text-align: center;
  animation: float 6s ease-in-out infinite;
  opacity: 0.7;
}

[data-theme="carollina"] .flower { content: 'üíñ'; }
[data-theme="hello-kitty"] .flower { content: 'üéÄ'; color: var(--primary); }
[data-theme="batman"] .flower { content: 'ü¶á'; color: var(--primary); font-size: 24px; }

.flower:nth-child(1) { top: 10px; left: 20px; animation-delay: 0s; }
.flower:nth-child(2) { top: 15px; right: 30px; animation-delay: 2s; }
.flower:nth-child(3) { bottom: 10px; left: 50%; animation-delay: 4s; }

@keyframes float {
  0%, 100% { transform: translateY(0) rotate(0deg); opacity: 0.7; }
  50% { transform: translateY(-15px) rotate(5deg); opacity: 1; }
}

/* Navega√ß√£o */
.nav-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: 0.8rem;
}

.nav-btn {
  background: var(--card-bg);
  border: 1px solid var(--bg-light);
  border-radius: 15px;
  padding: 1rem 0.5rem;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s ease;
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--text-dark);
}

.nav-btn.active {
  background: var(--primary);
  color: var(--text-light);
  border-color: var(--primary);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px color-mix(in srgb, var(--primary) 20%, transparent);
}

.nav-btn:hover:not(.active) {
  border-color: var(--hover-border);
  color: var(--primary);
  transform: translateY(-1px);
}

.nav-icon {
  font-size: 1.5rem;
  margin-bottom: 0.3rem;
  display: block;
}

/* Conte√∫do Principal */
.main-content {
  min-height: 400px;
  position: relative;
}

/* ================================================
   Formul√°rios e Bot√µes
================================================ */
.form-group {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 1rem;
  flex-wrap: wrap;
}

.form-group label {
  min-width: 80px;
  align-self: center;
  font-weight: 600;
  color: var(--primary);
}

input, select, textarea {
  flex: 1;
  padding: 0.8rem;
  border: 1px solid var(--bg-light);
  border-radius: 12px;
  font-size: 1rem;
  background: var(--bg-light);
  color: var(--text-dark);
  transition: all 0.3s ease;
}

input:focus, select:focus, textarea:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--primary) 20%, transparent);
  background: var(--card-bg);
}

button {
  background: var(--primary);
  color: var(--text-light);
  border: none;
  border-radius: 12px;
  padding: 0.8rem 1.5rem;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.3s ease;
}

button:hover {
  background: var(--secondary);
  transform: translateY(-1px);
}

/* ================================================
   Componentes Espec√≠ficos
================================================ */

/* Mensagem Motivacional */
.motivational-message {
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  color: var(--text-light);
  padding: 1.5rem;
  border-radius: 15px;
  margin-bottom: 1.5rem;
  text-align: center;
  font-weight: 600;
  box-shadow: var(--shadow);
  font-size: 1.3rem;
  font-style: italic;
  letter-spacing: 0.05em;
}

/* Listas (Tarefas, Metas, Compras) */
.task-list, .goal-list, .shopping-list {
  display: grid;
  gap: 0.8rem;
}

.task-item, .goal-item, .shopping-item {
  background: var(--bg-light);
  color: var(--text-dark);
  padding: 1rem;
  border-radius: 12px;
  border-left: 4px solid var(--primary);
  display: flex;
  align-items: center;
  gap: 0.8rem;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
  transition: box-shadow 0.3s ease, background 0.3s ease;
}

[data-theme="batman"] .task-item, 
[data-theme="batman"] .goal-item, 
[data-theme="batman"] .shopping-item {
  background: var(--secondary);
  color: var(--text-dark);
}

.goal-item { border-left-color: var(--secondary); }
.shopping-item { border-left-color: #10b981; }

.checkbox {
  width: 20px;
  height: 20px;
  border: 2px solid var(--secondary);
  border-radius: 4px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-light);
}

.checkbox.checked {
  background: var(--primary);
  border-color: var(--primary);
}

.completed {
  text-decoration: line-through;
  color: var(--secondary);
  opacity: 0.7;
}

.delete-btn {
  background: none;
  border: none;
  color: var(--secondary);
  font-weight: 600;
  padding: 0;
  margin-left: auto;
  font-size: 1.2rem;
}

.delete-btn:hover {
  color: #ef4444;
  transform: none;
}

/* Lembretes Fixos */
.fixed-reminders {
  display: grid;
  gap: 0.8rem;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
}

.reminder-card {
  background: var(--bg-light);
  padding: 1rem;
  border-radius: 12px;
  border-left: 5px solid var(--primary);
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
}

[data-theme="batman"] .reminder-card {
  background: var(--secondary);
  border-left-color: var(--primary);
}

.reminder-card h4 {
  color: var(--primary);
  margin-bottom: 0.3rem;
  font-size: 1.1rem;
}

.reminder-card p {
  font-size: 1rem;
  font-weight: 500;
}

/* Galeria de Amor */
.gallery-stats {
  display: flex;
  justify-content: space-around;
  text-align: center;
  margin-bottom: 1.5rem;
  padding: 1rem;
  background: var(--bg-light);
  border-radius: 15px;
  border: 1px solid var(--primary);
}

.gallery-stats div {
  flex: 1;
}

.gallery-stats h3 {
  color: var(--secondary);
  font-size: 1.8rem;
  margin-bottom: 0.2rem;
}

.gallery-stats p {
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--text-dark);
}

.gallery-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 1rem;
}

.gallery-item {
  border-radius: 12px;
  overflow: hidden;
  box-shadow: var(--shadow);
  cursor: pointer;
  position: relative;
  transition: transform 0.3s ease;
}

.gallery-item:hover {
  transform: scale(1.03);
}

.gallery-item img {
  width: 100%;
  height: 150px;
  object-fit: cover;
  display: block;
}

.gallery-item-caption {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  background: rgba(0, 0, 0, 0.5);
  color: white;
  padding: 0.5rem;
  font-size: 0.8rem;
  text-align: center;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.gallery-item:hover .gallery-item-caption {
  opacity: 1;
}

/* Sele√ß√£o de Tema */
.theme-selector-card {
  text-align: center;
  padding: 2rem;
}

.theme-options {
  display: flex;
  justify-content: center;
  gap: 2rem;
  margin-top: 1.5rem;
}

.theme-option {
  cursor: pointer;
  padding: 1rem;
  border-radius: 15px;
  border: 3px solid transparent;
  transition: all 0.3s ease;
  font-weight: 600;
  color: var(--text-dark);
}

.theme-option.selected {
  border-color: var(--primary);
  box-shadow: 0 0 10px color-mix(in srgb, var(--primary) 20%, transparent);
  transform: translateY(-3px);
}

.theme-option.love {
  background: var(--bg-light);
}
.theme-option.kitty {
  background: #ffe4e1;
}
.theme-option.batman {
  background: #3a3a3a;
  color: white;
}

.theme-option span {
  display: block;
  font-size: 2rem;
  margin-bottom: 0.5rem;
}

/* Bot√£o Flutuante */
.heart-btn {
  position: fixed;
  bottom: 2rem;
  right: 2rem;
  width: 60px;
  height: 60px;
  background: var(--primary);
  color: var(--text-light);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4px 20px color-mix(in srgb, var(--primary) 40%, transparent);
  cursor: pointer;
  transition: all 0.3s ease;
  z-index: 1000;
  font-size: 1.5rem;
}

.heart-btn:hover {
  transform: scale(1.1) rotate(5deg);
  background: var(--secondary);
}

/* Modal */
.modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  z-index: 2000;
  align-items: center;
  justify-content: center;
}

.modal-content {
  background: var(--card-bg);
  border-radius: 20px;
  padding: 2rem;
  position: relative;
  max-width: 500px;
  width: 90%;
  box-shadow: var(--shadow);
}

.modal-close {
  position: absolute;
  top: 1rem;
  right: 1rem;
  background: none;
  border: none;
  font-size: 1.5rem;
  cursor: pointer;
  color: var(--text-dark);
}

#image-viewer-modal .modal-content {
  max-width: 90vw;
  max-height: 90vh;
  padding: 0;
  background: transparent;
  box-shadow: none;
}

#image-viewer-modal img {
  max-width: 100%;
  max-height: 80vh;
  border-radius: 15px;
  object-fit: contain;
}

#image-viewer-modal .modal-close {
  color: var(--text-light);
  text-shadow: 0 0 5px black;
  font-size: 2rem;
  right: 0.5rem;
  top: 0.5rem;
  z-index: 2001;
}

/* ================================================
   Responsividade
================================================ */
@media (max-width: 768px) {
  .container { padding: 0.5rem; }
  .nav-grid { gap: 0.5rem; }
  .form-group { flex-direction: column; }
  .theme-options { flex-direction: column; gap: 1rem; }
  .heart-btn { bottom: 1rem; right: 1rem; width: 50px; height: 50px; }
  .gallery-stats { flex-direction: column; gap: 1rem; }
}

/* Anima√ß√µes */
.fade-in { animation: fadeIn 0.5s ease forwards; }
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
</style>


</head>
<body id="planner-body" data-theme="hello-kitty">
    <div class="container">
        <header>
            <div class="header-content">
                <h1 id="header-title">üéÄ Planner da Carollina Hello Kitty! üéÄ</h1>
                <p>Organiza√ß√£o com o amor do seu Pr√≠ncipe</p>
                <div class="date-display" id="current-date"></div>
            </div>
            <div class="flower"></div>
            <div class="flower"></div>
            <div class="flower"></div>
        </header>

        <nav>
            <div class="nav-grid">
                <button class="nav-btn active" data-view="home">
                    <span class="nav-icon">üè†</span>
                    In√≠cio
                </button>
                <button class="nav-btn" data-view="agenda">
                    <span class="nav-icon">üìÖ</span>
                    Agenda
                </button>
                <button class="nav-btn" data-view="tarefas">
                    <span class="nav-icon">‚úîÔ∏è</span>
                    Tarefas
                </button>
                <button class="nav-btn" data-view="metas">
                    <span class="nav-icon">üéØ</span>
                    Metas
                </button>
                <button class="nav-btn" data-view="lembretes">
                    <span class="nav-icon">‚è∞</span>
                    Lembretes
                </button>
                <button class="nav-btn" data-view="galeria">
                    <span class="nav-icon">üì∏</span>
                    Nossa Galeria
                </button>
                <button class="nav-btn" data-view="temas">
                    <span class="nav-icon">üé®</span>
                    Temas
                </button>
            </div>
        </nav>

        <main class="main-content" id="main-content">
            
            <section id="view-home" class="fade-in">
                <div class="motivational-message">
                    "Voc√™ √© a mulher mais incr√≠vel do universo, meu amor. <br> Organizar-se √© um ato de carinho consigo mesma. Eu te amo!"
                </div>
                
                <h2>Lembretes Essenciais do Seu Amor üìù</h2>
                <div class="fixed-reminders">
                    <div class="reminder-card">
                        <h4>‚è∞ 5:45 - Bom Dia, Nen√©m!</h4>
                        <p>Mensagem de bom dia para o seu pr√≠ncipe come√ßar o dia feliz.</p>
                    </div>
                    <div class="reminder-card">
                        <h4>üì± Responder o Instagram/TikTok</h4>
                        <p>Reserve um tempo para interagir com o pessoal nas redes sociais.</p>
                    </div>
                    <div class="reminder-card">
                        <h4>üõë Ligar/Chamar Aten√ß√£o do Nen√©m</h4>
                        <p>N√£o se esque√ßa da sua liga√ß√£o ou mensagem das 22h! Um abra√ßo virtual forte.</p>
                    </div>
                    <div class="reminder-card">
                        <h4>üåü Foco Pessoal</h4>
                        <p>O que voc√™ quer fazer S√ì por voc√™ hoje? (Ex: Leitura, skin care, medita√ß√£o).</p>
                    </div>
                </div>
                
                <h2 style="margin-top: 1.5rem; color: var(--primary);">Minhas Tarefas R√°pidas</h2>
                <div id="quick-task-list" class="task-list">
                    <!-- Tarefas ser√£o carregadas aqui -->
                </div>
            </section>
            
            <section id="view-agenda" style="display:none;" class="fade-in">
                <h2>Agenda Semanal</h2>
                <div id="calendar-view" class="calendar"></div>
                
                <h3 style="margin-top: 1.5rem; color: var(--primary);">Pr√≥ximos Eventos</h3>
                <ul id="event-list" class="task-list">
                    <!-- Eventos ser√£o carregados aqui -->
                </ul>
            </section>

            <section id="view-tarefas" style="display:none;" class="fade-in">
                <h2>Minhas Tarefas do Dia</h2>
                <form id="task-form" class="form-group" onsubmit="addTask(event)">
                    <input type="text" id="task-input" placeholder="O que voc√™ precisa fazer?" required />
                    <select id="task-category">
                        <option value="trabalho">üíª Trabalho</option>
                        <option value="pessoal">üå∏ Pessoal</option>
                        <option value="casa">üè° Casa</option>
                    </select>
                    <button type="submit">Adicionar</button>
                </form>
                <div id="task-list" class="task-list"></div>
            </section>

            <section id="view-metas" style="display:none;" class="fade-in">
                <h2>Metas de Longo Prazo</h2>
                <form id="goal-form" class="form-group" onsubmit="addGoal(event)">
                    <input type="text" id="goal-input" placeholder="Qual √© a sua meta?" required />
                    <input type="number" id="goal-progress" placeholder="Progresso (%)" min="0" max="100" value="0" style="flex: 0.5;" />
                    <button type="submit">Adicionar</button>
                </form>
                <div id="goal-list" class="goal-list"></div>
            </section>

            <section id="view-lembretes" style="display:none;" class="fade-in">
                <h2>‚è∞ Lembretes Autom√°ticos</h2>
                <p style="margin-bottom: 1rem; font-style: italic; color: var(--secondary);">Esses lembretes s√£o especialmente para voc√™ e nosso relacionamento!</p>
                
                <div class="fixed-reminders">
                    <div class="reminder-card">
                        <h4>üåÖ Bom Dia para o Nen√©m</h4>
                        <p>Hor√°rio: 5:45 AM</p>
                        <div class="reminder-status" id="good-morning-status">Status: Ativo</div>
                    </div>
                    <div class="reminder-card">
                        <h4>üì± Responder Instagram/TikTok</h4>
                        <p>Hor√°rio: 12:00 PM</p>
                        <div class="reminder-status" id="social-media-status">Status: Ativo</div>
                    </div>
                    <div class="reminder-card">
                        <h4>üí¨ Ligar para o Nen√©m</h4>
                        <p>Hor√°rio: 22:00 PM</p>
                        <div class="reminder-status" id="call-status">Status: Ativo</div>
                    </div>
                    <div class="reminder-card">
                        <h4>‚ù§Ô∏è Chamar Aten√ß√£o do Nen√©m</h4>
                        <p>Hor√°rio: 14:00 PM</p>
                        <div class="reminder-status" id="attention-status">Status: Ativo</div>
                    </div>
                </div>
                
                <h3 style="margin-top: 1.5rem; color: var(--primary);">Adicionar Novo Lembrete</h3>
                <form id="reminder-form" class="form-group" onsubmit="addReminder(event)">
                    <input type="text" id="reminder-title" placeholder="T√≠tulo do lembrete" required />
                    <input type="time" id="reminder-time" required />
                    <button type="submit">Adicionar Lembrete</button>
                </form>
                
                <h3 style="margin-top: 1.5rem; color: var(--primary);">Meus Lembretes Personalizados</h3>
                <div id="custom-reminders" class="task-list"></div>
            </section>

            <section id="view-galeria" style="display:none;" class="fade-in">
                <h2>üì∏ Nossa Galeria de Amor üíå</h2>
                <div class="gallery-stats">
                    <div>
                        <h3 id="days-together">0</h3>
                        <p>Dias Juntos</p>
                    </div>
                    <div>
                        <h3 id="love-notes">0</h3>
                        <p>Cartinhas Recebidas</p>
                    </div>
                    <div>
                        <h3 id="special-date">00/00/0000</h3>
                        <p>Pr√≥ximo Anivers√°rio de Namoro</p>
                    </div>
                </div>
                
                <h3 style="margin-top: 1.5rem; color: var(--primary);">Envie uma Mem√≥ria</h3>
                <form id="upload-form" class="form-group">
                    <input type="file" id="photo-upload" accept="image/*" style="flex: 0.5; padding: 0.5rem;" required />
                    <input type="text" id="photo-caption" placeholder="O que esta foto significa?" required />
                    <select id="photo-category" style="flex: 0.5;">
                        <option value="cartinha">üíå Cartinha</option>
                        <option value="foto-nossa">üì∏ Foto Nossa</option>
                        <option value="momento-especial">üåü Momento Especial</option>
                        <option value="surpresa">üéÅ Surpresa</option>
                    </select>
                    <button type="button" onclick="addGalleryItem()">Adicionar Foto</button>
                </form>
                
                <div style="margin-top: 1rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">
                    <button onclick="filterGallery('all')" class="filter-btn active">Todas</button>
                    <button onclick="filterGallery('cartinha')" class="filter-btn">üíå Cartinhas</button>
                    <button onclick="filterGallery('foto-nossa')" class="filter-btn">üì∏ Nossas Fotos</button>
                    <button onclick="filterGallery('momento-especial')" class="filter-btn">üåü Momentos</button>
                    <button onclick="filterGallery('surpresa')" class="filter-btn">üéÅ Surpresas</button>
                </div>
                
                <h3 style="margin-top: 1.5rem; color: var(--primary);">Nossas Lembran√ßas</h3>
                <div id="gallery-grid" class="gallery-grid"></div>
            </section>

            <section id="view-temas" style="display:none;" class="fade-in">
                <div class="theme-selector-card">
                    <h2>üé® Escolha o Seu Tema Favorito!</h2>
                    <p>O seu planner, do seu jeito. Mude a qualquer momento!</p>
                    <div class="theme-options">
                        <div class="theme-option love" data-theme="carollina-love" onclick="setTheme('carollina-love', this)">
                            <span>üíñ</span>
                            Carollina Love
                        </div>
                        <div class="theme-option kitty selected" data-theme="hello-kitty" onclick="setTheme('hello-kitty', this)">
                            <span>üéÄ</span>
                            Hello Kitty Dream
                        </div>
                        <div class="theme-option batman" data-theme="batman" onclick="setTheme('batman', this)">
                            <span>ü¶á</span>
                            Batman Knight
                        </div>
                    </div>
                </div>
            </section>

            <section id="view-compras" style="display:none;" class="fade-in">
                <h2>Lista de Compras</h2>
                <form id="shopping-form" class="form-group" onsubmit="addShoppingItem(event)">
                    <input type="text" id="shopping-input" placeholder="O que precisa comprar?" required />
                    <button type="submit">Adicionar</button>
                </form>
                <div id="shopping-list" class="shopping-list"></div>
            </section>

            <section id="view-gratidao" style="display:none;" class="fade-in">
                <h2>üôè Meu Di√°rio de Gratid√£o</h2>
                <p style="margin-bottom: 1rem; font-style: italic; color: var(--secondary);">O que fez o seu dia valer a pena hoje?</p>
                <textarea id="gratitude-entry" placeholder="Escreva aqui as 3 coisas pelas quais voc√™ √© grata hoje..." rows="6"></textarea>
                <button onclick="saveGratitude()">Salvar Gratid√£o</button>
                
                <h3 style="margin-top: 1.5rem; color: var(--primary);">Minhas √öltimas Entradas</h3>
                <div id="gratitude-history" class="task-list"></div>
            </section>

        </main>

        <div class="heart-btn" onclick="showLoveMessage()">‚ù§Ô∏è</div>

        <div id="event-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <button class="modal-close" onclick="closeModal('event-modal')">√ó</button>
                <h2>Adicionar Evento</h2>
                <form id="event-form" onsubmit="addEvent(event)">
                    <div class="form-group">
                        <input type="date" id="event-date" required />
                    </div>
                    <div class="form-group">
                        <input type="time" id="event-time" required />
                    </div>
                    <div class="form-group">
                        <input type="text" id="event-title" placeholder="Ex: Reuni√£o com o amor" required />
                    </div>
                    <div class="form-group">
                        <select id="event-category">
                            <option value="trabalho">üíª Trabalho</option>
                            <option value="pessoal">üå∏ Pessoal</option>
                            <option value="casa">üè° Casa</option>
                        </select>
                    </div>
                    <button type="submit">Salvar Evento</button>
                </form>
            </div>
        </div>
        
        <div id="image-viewer-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <button class="modal-close" onclick="closeModal('image-viewer-modal')">√ó</button>
               <!-- CONTINUA√á√ÉO DO C√ìDIGO ANTERIOR - PARTE 2 (JAVASCRIPT) -->
<script>
    // Use o armazenamento local (localStorage) para persistir dados e o tema.

    const VIEWS = ['home', 'agenda', 'tarefas', 'metas', 'lembretes', 'galeria', 'temas', 'compras', 'gratidao'];
    const BODY = document.getElementById('planner-body');
    const HEADER_TITLE = document.getElementById('header-title');
    const DATE_DISPLAY = document.getElementById('current-date');
    const MAIN_CONTENT = document.getElementById('main-content');
    
    // --- CONFIGURA√á√ÉO DE AMOR ---
    const DATE_OF_LOVE = '2024-03-22'; // Altere para a data de in√≠cio do namoro
    
    // --- FUN√á√ïES DE UTILIDADE GERAL ---
    
    /** Carrega e aplica o tema salvo no localStorage ou o padr√£o. */
    function loadTheme() {
        const savedTheme = localStorage.getItem('carollinaPlannerTheme') || 'hello-kitty';
        setTheme(savedTheme);
        
        // Marca o bot√£o de tema como selecionado
        document.querySelectorAll('.theme-option').forEach(btn => {
            btn.classList.remove('selected');
            if (btn.getAttribute('data-theme') === savedTheme) {
                btn.classList.add('selected');
            }
        });
        
        // Atualiza o t√≠tulo do header para refletir o tema
        updateHeaderTitle(savedTheme);
    }

    /** Atualiza o t√≠tulo do header baseado no tema */
    function updateHeaderTitle(theme) {
        if (theme === 'hello-kitty') {
            HEADER_TITLE.innerHTML = 'üéÄ Planner da Carollina <span style="font-size: 0.8em;">Hello Kitty!</span> üéÄ';
        } else if (theme === 'batman') {
            HEADER_TITLE.innerHTML = 'ü¶á Planner da Carollina <span style="font-size: 0.8em;">Knight Mode</span> ü¶á';
        } else {
            HEADER_TITLE.innerHTML = 'üå∏ Planner da Carollina üíñ';
        }
    }

    /** Define o tema e salva no localStorage. */
    function setTheme(themeName, element = null) {
        BODY.setAttribute('data-theme', themeName);
        localStorage.setItem('carollinaPlannerTheme', themeName);
        
        // Remove a sele√ß√£o de todos os bot√µes e adiciona ao selecionado
        document.querySelectorAll('.theme-option').forEach(btn => btn.classList.remove('selected'));
        if (element) {
            element.classList.add('selected');
        }
        
        // Atualiza o t√≠tulo imediatamente
        updateHeaderTitle(themeName);
    }

    /** Alterna a visualiza√ß√£o principal. */
    function changeView(viewName) {
        VIEWS.forEach(view => {
            const viewElement = document.getElementById(`view-${view}`);
            if (viewElement) {
                viewElement.style.display = 'none';
                viewElement.classList.remove('fade-in');
            }
        });
        
        const activeView = document.getElementById(`view-${viewName}`);
        if (activeView) {
            activeView.style.display = 'block';
            // Pequeno delay para garantir que a anima√ß√£o ocorra ap√≥s o display block
            setTimeout(() => activeView.classList.add('fade-in'), 10);
            
            // Atualiza o estado ativo dos bot√µes de navega√ß√£o
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-view') === viewName) {
                    btn.classList.add('active');
                }
            });
        }
        
        // Fun√ß√µes de inicializa√ß√£o espec√≠ficas para a view
        if (viewName === 'galeria') {
            updateLoveStats();
            renderGallery();
        } else if (viewName === 'home') {
            renderTasks('quick-task-list', getTasks().slice(0, 3), true); // Mostra as 3 primeiras tarefas na Home
        } else if (viewName === 'gratidao') {
            renderGratitudeHistory();
        } else if (viewName === 'lembretes') {
            renderCustomReminders();
        }
    }
    
    /** Abre um modal pelo ID. */
    function openModal(modalId) {
        document.getElementById(modalId).style.display = 'flex';
    }
    
    /** Fecha um modal pelo ID. */
    function closeModal(modalId) {
        document.getElementById(modalId).style.display = 'none';
    }

    /** Inicializa os bot√µes de navega√ß√£o. */
    function initNavButtons() {
        document.querySelectorAll('.nav-btn').forEach(button => {
            button.addEventListener('click', () => {
                changeView(button.getAttribute('data-view'));
            });
        });
    }
    
    // --- FUNCIONALIDADES DE DADOS (CRUD Gen√©rico) ---
    
    /** Obt√©m dados do localStorage. */
    function getData(key) {
        const data = localStorage.getItem(key);
        return data ? JSON.parse(data) : [];
    }

    /** Salva dados no localStorage. */
    function saveData(key, data) {
        localStorage.setItem(key, JSON.stringify(data));
    }
    
    // --- TAREFAS E CHECKLISTS ---

    function getTasks() { return getData('plannerTasks'); }
    function saveTasks(tasks) { saveData('plannerTasks', tasks); }

    function addTask(event) {
        event.preventDefault();
        const input = document.getElementById('task-input');
        const category = document.getElementById('task-category').value;
        
        if (input.value.trim()) {
            const newTask = {
                id: Date.now(),
                text: input.value.trim(),
                category: category,
                completed: false
            };
            
            const tasks = getTasks();
            tasks.push(newTask);
            saveTasks(tasks);
            input.value = '';
            renderTasks('task-list', tasks);
            renderTasks('quick-task-list', tasks.slice(0, 3), true);
        }
    }
    
    function toggleTask(checkboxElement) {
        const itemElement = checkboxElement.closest('.task-item');
        const taskId = itemElement.dataset.id;
        
        let tasks = getTasks();
        const taskIndex = tasks.findIndex(t => t.id == taskId);
        
        if (taskIndex > -1) {
            tasks[taskIndex].completed = !tasks[taskIndex].completed;
            saveTasks(tasks);
            renderTasks('task-list', tasks);
            renderTasks('quick-task-list', tasks.slice(0, 3), true);
        }
    }
    
    function deleteTask(buttonElement) {
        const itemElement = buttonElement.closest('.task-item');
        const taskId = itemElement.dataset.id;
        
        let tasks = getTasks();
        tasks = tasks.filter(t => t.id != taskId);
        saveTasks(tasks);
        renderTasks('task-list', tasks);
        renderTasks('quick-task-list', tasks.slice(0, 3), true);
    }

    /** Renderiza a lista de tarefas no elemento com o ID fornecido. */
    function renderTasks(listId, tasks, isQuick = false) {
        const list = document.getElementById(listId);
        if (!list) return;

        list.innerHTML = '';
        
        tasks.forEach(task => {
            const item = document.createElement('div');
            item.className = `task-item ${task.completed ? 'completed' : ''}`;
            item.setAttribute('data-id', task.id);
            
            // Determina a classe da badge
            let categoryClass = `category-${task.category}`;
            let categoryText = task.category.charAt(0).toUpperCase() + task.category.slice(1);
            if (task.category === 'trabalho') categoryText = 'üíª Trabalho';
            else if (task.category === 'pessoal') categoryText = 'üå∏ Pessoal';
            else if (task.category === 'casa') categoryText = 'üè° Casa';

            item.innerHTML = `
                <div class="checkbox ${task.completed ? 'checked' : ''}" data-checked="${task.completed}" onclick="toggleTask(this)">${task.completed ? '‚úî' : ''}</div>
                <span class="task-text ${task.completed ? 'completed' : ''}">${task.text}</span>
                <span class="category-badge ${categoryClass}">${categoryText}</span>
                ${!isQuick ? `<button class="delete-btn" onclick="deleteTask(this)">√ó</button>` : ''}
            `;
            list.appendChild(item);
        });
    }
    
    // --- LEMBRETES AUTOM√ÅTICOS ---
    
    function getReminders() { return getData('carollinaReminders'); }
    function saveReminders(reminders) { saveData('carollinaReminders', reminders); }

    function addReminder(event) {
        event.preventDefault();
        const title = document.getElementById('reminder-title');
        const time = document.getElementById('reminder-time');
        
        if (title.value.trim() && time.value) {
            const newReminder = {
                id: Date.now(),
                title: title.value.trim(),
                time: time.value,
                active: true
            };
            
            const reminders = getReminders();
            reminders.push(newReminder);
            saveReminders(reminders);
            title.value = '';
            time.value = '';
            renderCustomReminders();
            
            // Configura notifica√ß√£o se permitido
            setupReminderNotification(newReminder);
        }
    }

    function renderCustomReminders() {
        const list = document.getElementById('custom-reminders');
        const reminders = getReminders();
        
        list.innerHTML = '';
        
        reminders.forEach(reminder => {
            const item = document.createElement('div');
            item.className = 'task-item';
            item.setAttribute('data-id', reminder.id);
            
            item.innerHTML = `
                <div class="checkbox ${reminder.active ? 'checked' : ''}" onclick="toggleReminder(this)">${reminder.active ? '‚úî' : ''}</div>
                <span class="task-text">${reminder.title} - ${reminder.time}</span>
                <span class="reminder-status">${reminder.active ? 'Ativo' : 'Inativo'}</span>
                <button class="delete-btn" onclick="deleteReminder(this)">√ó</button>
            `;
            list.appendChild(item);
        });
    }

    function toggleReminder(checkboxElement) {
        const itemElement = checkboxElement.closest('.task-item');
        const reminderId = itemElement.dataset.id;
        
        let reminders = getReminders();
        const reminderIndex = reminders.findIndex(r => r.id == reminderId);
        
        if (reminderIndex > -1) {
            reminders[reminderIndex].active = !reminders[reminderIndex].active;
            saveReminders(reminders);
            renderCustomReminders();
        }
    }

    function deleteReminder(buttonElement) {
        const itemElement = buttonElement.closest('.task-item');
        const reminderId = itemElement.dataset.id;
        
        let reminders = getReminders();
        reminders = reminders.filter(r => r.id != reminderId);
        saveReminders(reminders);
        renderCustomReminders();
    }

    // Configura notifica√ß√µes para lembretes autom√°ticos
    function setupReminderNotification(reminder) {
        if (!("Notification" in window)) {
            console.log("Este navegador n√£o suporta notifica√ß√µes desktop");
            return;
        }

        // Solicita permiss√£o se necess√°rio
        if (Notification.permission === "default") {
            Notification.requestPermission().then(permission => {
                if (permission === "granted") {
                    scheduleReminder(reminder);
                }
            });
        } else if (Notification.permission === "granted") {
            scheduleReminder(reminder);
        }
    }

    function scheduleReminder(reminder) {
        const now = new Date();
        const [hours, minutes] = reminder.time.split(':');
        const reminderTime = new Date();
        reminderTime.setHours(parseInt(hours), parseInt(minutes), 0, 0);
        
        // Se o hor√°rio j√° passou hoje, agenda para amanh√£
        if (reminderTime < now) {
            reminderTime.setDate(reminderTime.getDate() + 1);
        }
        
        const timeUntilReminder = reminderTime.getTime() - now.getTime();
        
        if (timeUntilReminder > 0) {
            setTimeout(() => {
                if (reminder.active) {
                    new Notification(`Lembrete: ${reminder.title}`, {
                        body: `Hora de: ${reminder.title}`,
                        icon: '/favicon.ico',
                        tag: 'carollina-reminder'
                    });
                }
                // Agenda para o pr√≥ximo dia
                scheduleReminder(reminder);
            }, timeUntilReminder);
        }
    }

    // --- GALERIA DE AMOR E CONTADORES ---
    
    function getGallery() { return getData('carollinaGallery'); }
    function saveGallery(items) { saveData('carollinaGallery', items); }

    function updateLoveStats() {
        const start = new Date(DATE_OF_LOVE);
        const today = new Date();
        
        // Contagem de Dias Juntos
        const diffTime = Math.abs(today - start);
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); 
        document.getElementById('days-together').textContent = diffDays;
        
        // Contagem de Itens na Galeria (simula cartinhas)
        const galleryItems = getGallery();
        const cartinhasCount = galleryItems.filter(item => item.category === 'cartinha').length;
        document.getElementById('love-notes').textContent = cartinhasCount;
        
        // Pr√≥xima Data Especial (Exemplo: Pr√≥ximo Anivers√°rio de Namoro)
        let anniversaryYear = today.getFullYear();
        const startMonth = start.getMonth();
        const startDay = start.getDate();
        let nextAnniversary = new Date(anniversaryYear, startMonth, startDay);
        
        if (nextAnniversary < today) {
            anniversaryYear++;
            nextAnniversary = new Date(anniversaryYear, startMonth, startDay);
        }
        
        const formatter = new Intl.DateTimeFormat('pt-BR', { day: '2-digit', month: '2-digit', year: 'numeric' });
        document.getElementById('special-date').textContent = formatter.format(nextAnniversary);
    }

    function addGalleryItem() {
        const fileInput = document.getElementById('photo-upload');
        const captionInput = document.getElementById('photo-caption');
        const categorySelect = document.getElementById('photo-category');
        
        if (!fileInput.files[0] || !captionInput.value.trim()) {
            alert('Por favor, selecione uma imagem e adicione uma legenda.');
            return;
        }
        
        const reader = new FileReader();
        reader.onload = function(e) {
            const newItem = {
                id: Date.now(),
                caption: captionInput.value.trim(),
                category: categorySelect.value,
                image: e.target.result, // Base64 image data
                date: new Date().toISOString()
            };
            
            const galleryItems = getGallery();
            galleryItems.unshift(newItem); // Adiciona no in√≠cio para mostrar os mais recentes
            saveGallery(galleryItems);
            
            // Limpa o formul√°rio e renderiza
            fileInput.value = '';
            captionInput.value = '';
            renderGallery();
            updateLoveStats();
        };
        reader.readAsDataURL(fileInput.files[0]);
    }

    function renderGallery() {
        const grid = document.getElementById('gallery-grid');
        const items = getGallery();
        grid.innerHTML = '';
        
        items.forEach(item => {
            const galleryItem = document.createElement('div');
            galleryItem.className = 'gallery-item';
            galleryItem.onclick = () => viewImage(item.image, item.caption);
            galleryItem.setAttribute('data-category', item.category);
            
            galleryItem.innerHTML = `
                <img src="${item.image}" alt="${item.caption}" loading="lazy" />
                <div class="gallery-item-caption">${item.caption}</div>
            `;
            grid.appendChild(galleryItem);
        });
    }
    
    function filterGallery(category) {
        const items = document.querySelectorAll('.gallery-item');
        const filterButtons = document.querySelectorAll('.filter-btn');
        
        // Atualiza bot√µes ativos
        filterButtons.forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');
        
        items.forEach(item => {
            if (category === 'all' || item.getAttribute('data-category') === category) {
                item.style.display = 'block';
            } else {
                item.style.display = 'none';
            }
        });
    }
    
    function viewImage(base64Image, caption) {
        document.getElementById('modal-image').src = base64Image;
        document.getElementById('modal-image').alt = caption;
        openModal('image-viewer-modal');
    }
    
    // --- FUN√á√ïES EXTRAS DE AMOR ---
    
    function showLoveMessage() {
        const messages = [
            "Te amo mais que tudo, minha princesa! üíñ",
            "Voc√™ √© a raz√£o do meu sorriso todos os dias! üå∏",
            "Cada momento com voc√™ √© especial! ü•∞",
            "Minha vida ganhou cores quando voc√™ chegou! üåà",
            "Voc√™ √© a mulher mais incr√≠vel do universo! ‚ú®",
            "Meu cora√ß√£o √© seu para sempre! üíå",
            "Obrigado por ser exatamente quem voc√™ √©! üôè",
            "Cada dia ao seu lado √© um presente! üéÅ"
        ];
        
        const randomMessage = messages[Math.floor(Math.random() * messages.length)];
        
        // Cria um elemento de mensagem flutuante
        const loveMessage = document.createElement('div');
        loveMessage.textContent = randomMessage;
        loveMessage.style.cssText = `
            position: fixed;
            bottom: 100px;
            right: 30px;
            background: var(--primary);
            color: white;
            padding: 15px 20px;
            border-radius: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 1001;
            font-weight: 600;
            max-width: 250px;
            text-align: center;
            animation: floatUp 3s ease-in-out forwards;
        `;
        
        document.body.appendChild(loveMessage);
        
        // Remove a mensagem ap√≥s a anima√ß√£o
        setTimeout(() => {
            loveMessage.remove();
        }, 3000);
    }

    // Adiciona estilo para a anima√ß√£o da mensagem
    const style = document.createElement('style');
    style.textContent = `
        @keyframes floatUp {
            0% { transform: translateY(0); opacity: 0; }
            20% { transform: translateY(-20px); opacity: 1; }
            80% { transform: translateY(-20px); opacity: 1; }
            100% { transform: translateY(-40px); opacity: 0; }
        }
    `;
    document.head.appendChild(style);
    
    // --- INICIALIZA√á√ÉO ---
    
    function initPlanner() {
        // 1. Carrega o tema
        loadTheme();

        // 2. Exibe a data
        const today = new Date();
        DATE_DISPLAY.textContent = today.toLocaleDateString('pt-BR', { 
            weekday: 'long', 
            year: 'numeric', 
            month: 'long', 
            day: 'numeric' 
        });

        // 3. Inicializa navega√ß√£o
        initNavButtons();

        // 4. Carrega as views iniciais
        renderTasks('task-list', getTasks());
        renderTasks('quick-task-list', getTasks().slice(0, 3), true);
        renderCustomReminders();

        // 5. Configura lembretes autom√°ticos
        setupAutomaticReminders();

        // 6. Exibe a view inicial (Home)
        changeView('home');
        
        // 7. Inicia notifica√ß√µes de amor aleat√≥rias
        startRandomLoveNotifications();
    }

    // Configura lembretes autom√°ticos essenciais
    function setupAutomaticReminders() {
        const automaticReminders = [
            { id: 'good-morning', title: 'üåÖ Bom Dia para o Nen√©m', time: '05:45', active: true },
            { id: 'social-media', title: 'üì± Responder Instagram/TikTok', time: '12:00', active: true },
            { id: 'call', title: 'üí¨ Ligar para o Nen√©m', time: '22:00', active: true },
            { id: 'attention', title: '‚ù§Ô∏è Chamar Aten√ß√£o do Nen√©m', time: '14:00', active: true }
        ];

        // Verifica se j√° existem e adiciona se necess√°rio
        automaticReminders.forEach(reminder => {
            setupReminderNotification(reminder);
        });
    }

    // Notifica√ß√µes de amor aleat√≥rias
    function startRandomLoveNotifications() {
        // Notifica√ß√£o a cada 2-4 horas (apenas durante o dia)
        setInterval(() => {
            const now = new Date();
            const hour = now.getHours();
            
            // S√≥ mostra notifica√ß√µes entre 8h e 22h
            if (hour >= 8 && hour <= 22 && Math.random() > 0.7) {
                showRandomLoveNotification();
            }
        }, 2 * 60 * 60 * 1000); // 2 horas
    }

    function showRandomLoveNotification() {
        if (Notification.permission === "granted") {
            const loveMessages = [
                { title: "üíñ Lembrete de Amor", body: "Seu pr√≠ncipe te ama muito!" },
                { title: "üå∏ Momento Carollina", body: "Voc√™ √© incr√≠vel! Lembre-se disso!" },
                { title: "‚ú® Voc√™ √© Especial", body: "O universo sorri quando voc√™ sorri!" },
                { title: "üíå Mensagem do Cora√ß√£o", body: "Seu nen√©m est√° pensando em voc√™!" }
            ];
            
            const message = loveMessages[Math.floor(Math.random() * loveMessages.length)];
            new Notification(message.title, {
                body: message.body,
                icon: '/favicon.ico'
            });
        }
    }

    // Adiciona um listener para iniciar o planner quando a p√°gina carregar
    document.addEventListener('DOMContentLoaded', initPlanner);
    
    // Adiciona um listener para fechar o modal ao clicar fora
    document.addEventListener('click', (e) => {
        if (e.target.classList.contains('modal')) {
            closeModal(e.target.id);
        }
    });

    // --- FUN√á√ïES DE OUTRAS SE√á√ïES ---
    
    function addGoal(event) { 
        event.preventDefault(); 
        const input = document.getElementById('goal-input');
        const progress = document.getElementById('goal-progress');
        
        if (input.value.trim()) {
            const goals = getData('plannerGoals') || [];
            const newGoal = {
                id: Date.now(),
                text: input.value.trim(),
                progress: parseInt(progress.value),
                date: new Date().toISOString()
            };
            
            goals.push(newGoal);
            saveData('plannerGoals', goals);
            
            // Renderiza as metas
            renderGoals();
            
            input.value = '';
            progress.value = '0';
        }
    }
    
    function renderGoals() {
        const goalList = document.getElementById('goal-list');
        const goals = getData('plannerGoals') || [];
        
        goalList.innerHTML = '';
        
        goals.forEach(goal => {
            const goalItem = document.createElement('div');
            goalItem.className = 'goal-item';
            goalItem.innerHTML = `
                <span class="task-text" style="flex: 1;">${goal.text}</span>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <div style="width: 100px; height: 10px; background: var(--bg-light); border-radius: 5px; overflow: hidden;">
                        <div class="progress-fill" style="width: ${goal.progress}%; height: 100%; background: var(--primary); transition: width 0.3s ease;"></div>
                    </div>
                    <span style="font-weight: 600; color: var(--primary); min-width: 40px;">${goal.progress}%</span>
                </div>
                <button class="delete-btn" onclick="deleteGoal(${goal.id})">√ó</button>
            `;
            goalList.appendChild(goalItem);
        });
    }
    
    function deleteGoal(goalId) {
        let goals = getData('plannerGoals') || [];
        goals = goals.filter(goal => goal.id !== goalId);
        saveData('plannerGoals', goals);
        renderGoals();
    }
    
    function addShoppingItem(event) { 
        event.preventDefault(); 
        const input = document.getElementById('shopping-input');
        
        if (input.value.trim()) {
            const shoppingItems = getData('plannerShopping') || [];
            const newItem = {
                id: Date.now(),
                text: input.value.trim(),
                completed: false
            };
            
            shoppingItems.push(newItem);
            saveData('plannerShopping', shoppingItems);
            renderShoppingList();
            input.value = '';
        }
    }
    
    function renderShoppingList() {
        const shoppingList = document.getElementById('shopping-list');
        const items = getData('plannerShopping') || [];
        
        shoppingList.innerHTML = '';
        
        items.forEach(item => {
            const listItem = document.createElement('div');
            listItem.className = `shopping-item ${item.completed ? 'completed' : ''}`;
            listItem.setAttribute('data-id', item.id);
            listItem.innerHTML = `
                <div class="checkbox ${item.completed ? 'checked' : ''}" onclick="toggleShoppingItem(this)">${item.completed ? '‚úî' : ''}</div>
                <span class="task-text ${item.completed ? 'completed' : ''}">${item.text}</span>
                <button class="delete-btn" onclick="deleteShoppingItem(this)">√ó</button>
            `;
            shoppingList.appendChild(listItem);
        });
    }
    
    function toggleShoppingItem(checkbox) {
        const itemElement = checkbox.closest('.shopping-item');
        const itemId = parseInt(itemElement.dataset.id);
        
        let items = getData('plannerShopping') || [];
        const itemIndex = items.findIndex(item => item.id === itemId);
        
        if (itemIndex > -1) {
            items[itemIndex].completed = !items[itemIndex].completed;
            saveData('plannerShopping', items);
            renderShoppingList();
        }
    }
    
    function deleteShoppingItem(button) {
        const itemElement = button.closest('.shopping-item');
        const itemId = parseInt(itemElement.dataset.id);
        
        let items = getData('plannerShopping') || [];
        items = items.filter(item => item.id !== itemId);
        saveData('plannerShopping', items);
        renderShoppingList();
    }
    
    function saveGratitude() { 
        const textarea = document.getElementById('gratitude-entry');
        if (textarea.value.trim()) {
            const gratitudeEntries = getData('plannerGratitude') || [];
            const newEntry = {
                id: Date.now(),
                text: textarea.value.trim(),
                date: new Date().toISOString()
            };
            
            gratitudeEntries.unshift(newEntry); // Adiciona no in√≠cio
            saveData('plannerGratitude', gratitudeEntries);
            textarea.value = '';
            renderGratitudeHistory();
            
            // Mostra confirma√ß√£o
            const confirmation = document.createElement('div');
            confirmation.textContent = 'Gratid√£o salva no seu di√°rio! üôè';
            confirmation.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: var(--primary);
                color: white;
                padding: 10px 20px;
                border-radius: 20px;
                z-index: 1001;
                font-weight: 600;
                animation: fadeInOut 3s ease-in-out forwards;
            `;
            document.body.appendChild(confirmation);
            setTimeout(() => confirmation.remove(), 3000);
        }
    }
    
    function renderGratitudeHistory() { 
        const history = document.getElementById('gratitude-history');
        const entries = getData('plannerGratitude') || [];
        
        history.innerHTML = '';
        
        // Adiciona estilo para fadeInOut se n√£o existir
        if (!document.querySelector('#fadeInOutStyle')) {
            const style = document.createElement('style');
            style.id = 'fadeInOutStyle';
            style.textContent = `
                @keyframes fadeInOut {
                    0% { opacity: 0; transform: translateX(-50%) translateY(-20px); }
                    20% { opacity: 1; transform: translateX(-50%) translateY(0); }
                    80% { opacity: 1; transform: translateX(-50%) translateY(0); }
                    100% { opacity: 0; transform: translateX(-50%) translateY(-20px); }
                }
            `;
            document.head.appendChild(style);
        }
        
        entries.slice(0, 5).forEach(entry => {
            const entryDate = new Date(entry.date);
            const formattedDate = entryDate.toLocaleDateString('pt-BR', { 
                day: '2-digit', 
                month: '2-digit',
                hour: '2-digit',
                minute: '2-digit'
            });
            
            const entryElement = document.createElement('div');
            entryElement.className = 'task-item';
            entryElement.style.borderLeftColor = '#f6d365';
            entryElement.innerHTML = `
                <span class="task-text">${entry.text}</span>
                <small style="color: var(--secondary); white-space: nowrap;">${formattedDate}</small>
            `;
            history.appendChild(entryElement);
        });
        
        if (entries.length === 0) {
            history.innerHTML = '<div class="task-item" style="border-left-color: #f6d365; text-align: center; color: var(--secondary);">Nenhuma entrada de gratid√£o ainda. Comece a escrever! üôè</div>';
        }
    }
    
    // Fun√ß√µes do calend√°rio (Agenda)
    function addEvent(event) {
        event.preventDefault();
        const title = document.getElementById('event-title').value;
        const date = document.getElementById('event-date').value;
        const time = document.getElementById('event-time').value;
        const category = document.getElementById('event-category').value;
        
        const events = getData('plannerEvents') || [];
        const newEvent = {
            id: Date.now(),
            title: title,
            date: date,
            time: time,
            category: category
        };
        
        events.push(newEvent);
        saveData('plannerEvents', events);
        
        // Fecha o modal e renderiza eventos
        closeModal('event-modal');
        renderEvents();
        
        // Limpa o formul√°rio
        document.getElementById('event-form').reset();
    }
    
    function renderEvents() {
        const eventList = document.getElementById('event-list');
        const events = getData('plannerEvents') || [];
        
        eventList.innerHTML = '';
        
        // Ordena eventos por data
        events.sort((a, b) => new Date(a.date + 'T' + a.time) - new Date(b.date + 'T' + b.time));
        
        events.forEach(event => {
            const eventDate = new Date(event.date);
            const today = new Date();
            const isToday = eventDate.toDateString() === today.toDateString();
            
            const eventElement = document.createElement('li');
            eventElement.className = 'task-item goal-item';
            eventElement.innerHTML = `
                <span class="task-text">${event.title} - ${event.time} ${isToday ? '(Hoje)' : `(${eventDate.toLocaleDateString('pt-BR')})`}</span>
                <span class="category-badge category-${event.category}">${getCategoryText(event.category)}</span>
                <button class="delete-btn" onclick="deleteEvent(${event.id})">√ó</button>
            `;
            eventList.appendChild(eventElement);
        });
        
        if (events.length === 0) {
            eventList.innerHTML = '<li class="task-item goal-item" style="text-align: center; color: var(--secondary);">Nenhum evento agendado. Adicione seu primeiro evento! üìÖ</li>';
        }
    }
    
    function deleteEvent(eventId) {
        let events = getData('plannerEvents') || [];
        events = events.filter(event => event.id !== eventId);
        saveData('plannerEvents', events);
        renderEvents();
    }
    
    function getCategoryText(category) {
        switch(category) {
            case 'trabalho': return 'üíª Trabalho';
            case 'pessoal': return 'üå∏ Pessoal';
            case 'casa': return 'üè° Casa';
            default: return category;
        }
    }
    
    // Simula√ß√£o de calend√°rio para a Agenda
    function renderCalendar() {
        const calendarEl = document.getElementById('calendar-view');
        const daysOfWeek = ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'S√°b'];
        
        let calendarHTML = '<div class="calendar-grid">';
        
        // Cabe√ßalho dos dias da semana
        daysOfWeek.forEach(day => {
            calendarHTML += `<div class="calendar-day header">${day}</div>`;
        });
        
        const today = new Date();
        const firstDay = new Date(today.getFullYear(), today.getMonth(), 1);
        const lastDay = new Date(today.getFullYear(), today.getMonth() + 1, 0);
        
        // Dias vazios no in√≠cio
        for(let i = 0; i < firstDay.getDay(); i++) {
            calendarHTML += `<div class="calendar-day empty"></div>`;
        }
        
        // Dias do m√™s
        for(let i = 1; i <= lastDay.getDate(); i++) {
            const isToday = i === today.getDate() && today.getMonth() === new Date().getMonth() && today.getFullYear() === new Date().getFullYear();
            const hasEvent = Math.random() > 0.8; // Simula eventos aleat√≥rios
            
            let classes = 'calendar-day';
            if (isToday) classes += ' today';
            if (hasEvent) classes += ' has-event';
            
            calendarHTML += `<div class="${classes}" onclick="openModal('event-modal')">
                ${i}
                ${hasEvent ? '<span class="event-dot"></span>' : ''}
            </div>`;
        }
        
        calendarHTML += '</div>';
        calendarEl.innerHTML = calendarHTML;
        
        // Adiciona estilos para o calend√°rio
        if (!document.querySelector('#calendarStyles')) {
            const calendarStyles = document.createElement('style');
            calendarStyles.id = 'calendarStyles';
            calendarStyles.textContent = `
                .calendar-grid {
                    display: grid;
                    grid-template-columns: repeat(7, 1fr);
                    gap: 5px;
                    margin-bottom: 1rem;
                }
                .calendar-day {
                    padding: 10px;
                    text-align: center;
                    border-radius: 8px;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    position: relative;
                    min-height: 40px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    background: var(--bg-light);
                }
                .calendar-day.header {
                    font-weight: 700;
                    background: var(--primary);
                    color: var(--text-light);
                    cursor: default;
                }
                .calendar-day.empty {
                    background: transparent;
                    cursor: default;
                }
                .calendar-day.today {
                    background: var(--secondary);
                    color: var(--text-light);
                    font-weight: 700;
                }
                .calendar-day.has-event::after {
                    content: '';
                    position: absolute;
                    bottom: 3px;
                    left: 50%;
                    transform: translateX(-50%);
                    width: 6px;
                    height: 6px;
                    background: var(--primary);
                    border-radius: 50%;
                }
                .calendar-day:hover:not(.header):not(.empty) {
                    transform: translateY(-2px);
                    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
                }
            `;
            <!-- CONTINUA√á√ÉO DO C√ìDIGO ANTERIOR - PARTE 3 (JAVASCRIPT) -->
            document.head.appendChild(calendarStyles);
        }
        
        // Renderiza eventos ap√≥s o calend√°rio
        renderEvents();
    }

    // --- FUN√á√ïES DE INICIALIZA√á√ÉO E UTILIT√ÅRIAS ---

    // Inicializa notifica√ß√µes quando a p√°gina carrega
    document.addEventListener('DOMContentLoaded', function() {
        if ("Notification" in window && Notification.permission === "default") {
            Notification.requestPermission();
        }
        
        // Inicializa todas as funcionalidades
        initPlanner();
        
        // Renderiza componentes que precisam de inicializa√ß√£o
        renderCalendar();
        renderGoals();
        renderShoppingList();
        renderGratitudeHistory();
    });

    // --- SISTEMA DE NOTIFICA√á√ïES AVAN√áADO ---

    function setupAdvancedReminders() {
        // Verifica se √© hora dos lembretes autom√°ticos
        setInterval(() => {
            const now = new Date();
            const currentTime = now.getHours() + ':' + (now.getMinutes() < 10 ? '0' : '') + now.getMinutes();
            
            const automaticReminders = [
                { time: '05:45', title: 'üåÖ Bom Dia para o Nen√©m', message: 'Hora de enviar a mensagem de bom dia para o seu pr√≠ncipe!' },
                { time: '12:00', title: 'üì± Redes Sociais', message: 'Que tal dar uma olhada no Instagram/TikTok?' },
                { time: '14:00', title: '‚ù§Ô∏è Aten√ß√£o do Nen√©m', message: 'Hora de chamar a aten√ß√£o do seu amor!' },
                { time: '22:00', title: 'üí¨ Liga√ß√£o do Amor', message: 'N√£o esque√ßa da liga√ß√£o das 22h com o seu nen√©m!' }
            ];
            
            automaticReminders.forEach(reminder => {
                if (currentTime === reminder.time) {
                    showCustomNotification(reminder.title, reminder.message);
                }
            });
        }, 60000); // Verifica a cada minuto
    }

    function showCustomNotification(title, message) {
        if (Notification.permission === "granted") {
            new Notification(title, {
                body: message,
                icon: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">üíñ</text></svg>',
                tag: 'carollina-reminder'
            });
        }
        
        // Tamb√©m mostra uma mensagem na tela
        showLoveMessage();
    }

    // --- SISTEMA DE BACKUP E RECUPERA√á√ÉO ---

    function exportData() {
        const allData = {
            tasks: getData('plannerTasks'),
            goals: getData('plannerGoals'),
            events: getData('plannerEvents'),
            shopping: getData('plannerShopping'),
            gratitude: getData('plannerGratitude'),
            gallery: getData('carollinaGallery'),
            reminders: getData('carollinaReminders'),
            theme: localStorage.getItem('carollinaPlannerTheme'),
            exportDate: new Date().toISOString()
        };
        
        const dataStr = JSON.stringify(allData, null, 2);
        const dataBlob = new Blob([dataStr], { type: 'application/json' });
        
        const link = document.createElement('a');
        link.href = URL.createObjectURL(dataBlob);
        link.download = `carollina-planner-backup-${new Date().toISOString().split('T')[0]}.json`;
        link.click();
        
        alert('Backup exportado com sucesso! üíæ');
    }

    function importData(event) {
        const file = event.target.files[0];
        if (!file) return;
        
        const reader = new FileReader();
        reader.onload = function(e) {
            try {
                const importedData = JSON.parse(e.target.result);
                
                // Restaura todos os dados
                if (importedData.tasks) saveData('plannerTasks', importedData.tasks);
                if (importedData.goals) saveData('plannerGoals', importedData.goals);
                if (importedData.events) saveData('plannerEvents', importedData.events);
                if (importedData.shopping) saveData('plannerShopping', importedData.shopping);
                if (importedData.gratitude) saveData('plannerGratitude', importedData.gratitude);
                if (importedData.gallery) saveData('carollinaGallery', importedData.gallery);
                if (importedData.reminders) saveData('carollinaReminders', importedData.reminders);
                if (importedData.theme) localStorage.setItem('carollinaPlannerTheme', importedData.theme);
                
                // Recarrega a p√°gina para aplicar as mudan√ßas
                alert('Dados importados com sucesso! üîÑ Recarregando...');
                setTimeout(() => location.reload(), 1000);
                
            } catch (error) {
                alert('Erro ao importar dados. Verifique se o arquivo √© v√°lido. ‚ùå');
                console.error('Import error:', error);
            }
        };
        reader.readAsText(file);
        
        // Limpa o input
        event.target.value = '';
    }

    // --- SISTEMA DE ESTAT√çSTICAS E RELAT√ìRIOS ---

    function generateWeeklyReport() {
        const tasks = getData('plannerTasks') || [];
        const completedTasks = tasks.filter(task => task.completed).length;
        const totalTasks = tasks.length;
        const completionRate = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;
        
        const goals = getData('plannerGoals') || [];
        const averageGoalProgress = goals.length > 0 ? 
            Math.round(goals.reduce((sum, goal) => sum + goal.progress, 0) / goals.length) : 0;
        
        const gratitudeEntries = getData('plannerGratitude') || [];
        const recentGratitude = gratitudeEntries.slice(0, 3);
        
        const report = `
üìä RELAT√ìRIO SEMANAL - PLANNER DA CAROLLINA üìä

‚úÖ TAREFAS:
   - Conclu√≠das: ${completedTasks}/${totalTasks}
   - Taxa de conclus√£o: ${completionRate}%

üéØ METAS:
   - Progresso m√©dio: ${averageGoalProgress}%
   - Total de metas: ${goals.length}

üôè GRATID√ÉO:
   - Entradas esta semana: ${gratitudeEntries.length}
   ${recentGratitude.map(entry => `   - "${entry.text.substring(0, 30)}..."`).join('\n')}

üíù LEMBRETE:
   Voc√™ est√° fazendo um trabalho incr√≠vel!
   Seu pr√≠ncipe te ama muito! üíñ
        `;
        
        // Cria um modal para mostrar o relat√≥rio
        const reportModal = document.createElement('div');
        reportModal.className = 'modal';
        reportModal.style.display = 'flex';
        reportModal.innerHTML = `
            <div class="modal-content" style="max-width: 600px;">
                <button class="modal-close" onclick="this.parentElement.parentElement.remove()">√ó</button>
                <h2 style="color: var(--primary); margin-bottom: 1rem;">üìä Seu Relat√≥rio Semanal</h2>
                <div style="white-space: pre-line; background: var(--bg-light); padding: 1.5rem; border-radius: 12px; font-family: monospace; line-height: 1.6;">
                    ${report}
                </div>
                <div style="margin-top: 1rem; display: flex; gap: 1rem;">
                    <button onclick="downloadReport()" style="flex: 1;">üì• Baixar Relat√≥rio</button>
                    <button onclick="this.parentElement.parentElement.parentElement.remove()" style="flex: 1; background: var(--secondary);">Fechar</button>
                </div>
            </div>
        `;
        document.body.appendChild(reportModal);
    }

    function downloadReport() {
        const tasks = getData('plannerTasks') || [];
        const completedTasks = tasks.filter(task => task.completed).length;
        const totalTasks = tasks.length;
        const completionRate = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;
        
        const report = `Relat√≥rio do Planner - ${new Date().toLocaleDateString('pt-BR')}

Tarefas Conclu√≠das: ${completedTasks}/${totalTasks} (${completionRate}%)
Metas em Andamento: ${(getData('plannerGoals') || []).length}
Entradas de Gratid√£o: ${(getData('plannerGratitude') || []).length}

"Continue sendo essa mulher incr√≠vel! Te amo! üíñ"`;

        const blob = new Blob([report], { type: 'text/plain' });
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = `relatorio-planner-${new Date().toISOString().split('T')[0]}.txt`;
        link.click();
    }

    // --- SISTEMA DE PERSONALIZA√á√ÉO AVAN√áADA ---

    function customizePlanner() {
        const modal = document.createElement('div');
        modal.className = 'modal';
        modal.style.display = 'flex';
        modal.innerHTML = `
            <div class="modal-content" style="max-width: 500px;">
                <button class="modal-close" onclick="this.parentElement.parentElement.remove()">√ó</button>
                <h2 style="color: var(--primary); margin-bottom: 1rem;">üé® Personalizar Planner</h2>
                
                <div class="form-group">
                    <label>Nome do Planner:</label>
                    <input type="text" id="custom-planner-name" value="Planner da Carollina" />
                </div>
                
                <div class="form-group">
                    <label>Data Especial:</label>
                    <input type="date" id="custom-love-date" value="${DATE_OF_LOVE}" />
                </div>
                
                <div class="form-group">
                    <label>Lembretes Personalizados:</label>
                    <textarea id="custom-reminders-text" placeholder="Adicione seus lembretes pessoais..." rows="4"></textarea>
                </div>
                
                <div style="margin-top: 1.5rem; display: flex; gap: 1rem;">
                    <button onclick="saveCustomization()" style="flex: 1;">üíæ Salvar</button>
                    <button onclick="resetCustomization()" style="flex: 1; background: #ef4444;">üîÑ Resetar</button>
                    <button onclick="this.parentElement.parentElement.parentElement.remove()" style="flex: 1; background: var(--secondary);">Fechar</button>
                </div>
            </div>
        `;
        document.body.appendChild(modal);
        
        // Carrega personaliza√ß√µes salvas
        const savedCustomization = getData('plannerCustomization') || {};
        document.getElementById('custom-planner-name').value = savedCustomization.plannerName || 'Planner da Carollina';
        document.getElementById('custom-love-date').value = savedCustomization.loveDate || DATE_OF_LOVE;
        document.getElementById('custom-reminders-text').value = savedCustomization.customReminders || '';
    }

    function saveCustomization() {
        const customization = {
            plannerName: document.getElementById('custom-planner-name').value,
            loveDate: document.getElementById('custom-love-date').value,
            customReminders: document.getElementById('custom-reminders-text').value,
            savedAt: new Date().toISOString()
        };
        
        saveData('plannerCustomization', customization);
        
        // Atualiza o t√≠tulo
        HEADER_TITLE.innerHTML = `üéÄ ${customization.plannerName} üéÄ`;
        
        // Fecha o modal
        document.querySelector('.modal').remove();
        
        // Mostra confirma√ß√£o
        alert('Personaliza√ß√£o salva com sucesso! ‚ú®');
    }

    function resetCustomization() {
        if (confirm('Tem certeza que deseja resetar todas as personaliza√ß√µes?')) {
            localStorage.removeItem('plannerCustomization');
            HEADER_TITLE.innerHTML = 'üéÄ Planner da Carollina üéÄ';
            document.querySelector('.modal').remove();
            alert('Personaliza√ß√µes resetadas! üîÑ');
        }
    }

    // --- FUN√á√ïES DE ACESSIBILIDADE ---

    function toggleHighContrast() {
        BODY.classList.toggle('high-contrast');
        localStorage.setItem('highContrast', BODY.classList.contains('high-contrast'));
    }

    function increaseFontSize() {
        const currentSize = parseFloat(getComputedStyle(document.body).fontSize);
        document.body.style.fontSize = (currentSize * 1.1) + 'px';
        localStorage.setItem('fontSize', document.body.style.fontSize);
    }

    function decreaseFontSize() {
        const currentSize = parseFloat(getComputedStyle(document.body).fontSize);
        document.body.style.fontSize = (currentSize / 1.1) + 'px';
        localStorage.setItem('fontSize', document.body.style.fontSize);
    }

    function resetFontSize() {
        document.body.style.fontSize = '';
        localStorage.removeItem('fontSize');
    }

    // --- SISTEMA DE AJUDA E TUTORIAL ---

    function showTutorial() {
        const tutorialSteps = [
            {
                title: "üéÄ Bem-vinda ao seu Planner!",
                content: "Este √© seu espa√ßo pessoal de organiza√ß√£o, feito com todo amor do seu pr√≠ncipe! üíñ"
            },
            {
                title: "üìù Tarefas e Metas",
                content: "Adicione tarefas di√°rias e metas de longo prazo. Marque como conclu√≠das para acompanhar seu progresso!"
            },
            {
                title: "‚è∞ Lembretes Autom√°ticos",
                content: "Configure lembretes para n√£o esquecer dos momentos especiais com seu amor!"
            },
            {
                title: "üì∏ Galeria do Amor",
                content: "Guarde fotos e mem√≥rias especiais do nosso relacionamento! üíå"
            },
            {
                title: "üé® Personaliza√ß√£o",
                content: "Mude o tema e personalize tudo do seu jeito! Temos Hello Kitty, Batman e muito mais!"
            }
        ];

        let currentStep = 0;
        
        const tutorialModal = document.createElement('div');
        tutorialModal.className = 'modal';
        tutorialModal.style.display = 'flex';
        
        function updateTutorial() {
            tutorialModal.innerHTML = `
                <div class="modal-content" style="max-width: 500px; text-align: center;">
                    <button class="modal-close" onclick="this.parentElement.parentElement.remove()">√ó</button>
                    <h2 style="color: var(--primary); margin-bottom: 1rem;">${tutorialSteps[currentStep].title}</h2>
                    <p style="margin-bottom: 1.5rem; line-height: 1.6;">${tutorialSteps[currentStep].content}</p>
                    <div style="display: flex; justify-content: center; gap: 0.5rem; margin-bottom: 1rem;">
                        ${tutorialSteps.map((_, index) => 
                            `<div style="width: 10px; height: 10px; border-radius: 50%; background: ${index === currentStep ? 'var(--primary)' : 'var(--bg-light)'};"></div>`
                        ).join('')}
                    </div>
                    <div style="display: flex; gap: 1rem;">
                        <button onclick="currentStep--; updateTutorial()" ${currentStep === 0 ? 'disabled' : ''} style="flex: 1;">‚¨ÖÔ∏è Anterior</button>
                        ${currentStep === tutorialSteps.length - 1 ? 
                            `<button onclick="this.parentElement.parentElement.parentElement.remove()" style="flex: 1; background: var(--secondary);">üéâ Come√ßar!</button>` :
                            `<button onclick="currentStep++; updateTutorial()" style="flex: 1;">Pr√≥ximo ‚û°Ô∏è</button>`
                        }
                    </div>
                </div>
            `;
        }
        
        updateTutorial();
        document.body.appendChild(tutorialModal);
    }

    // --- MENU DE CONTROLES AVAN√áADOS ---

    function showAdvancedMenu() {
        const menu = document.createElement('div');
        menu.className = 'modal';
        menu.style.display = 'flex';
        menu.innerHTML = `
            <div class="modal-content" style="max-width: 400px;">
                <button class="modal-close" onclick="this.parentElement.parentElement.remove()">√ó</button>
                <h2 style="color: var(--primary); margin-bottom: 1rem;">‚öôÔ∏è Controles Avan√ßados</h2>
                
                <div style="display: grid; gap: 0.5rem;">
                    <button onclick="exportData()" style="justify-content: start; gap: 0.5rem;">
                        üíæ Exportar Backup
                    </button>
                    <button onclick="document.getElementById('import-file').click()" style="justify-content: start; gap: 0.5rem;">
                        üì§ Importar Backup
                    </button>
                    <button onclick="generateWeeklyReport()" style="justify-content: start; gap: 0.5rem;">
                        üìä Relat√≥rio Semanal
                    </button>
                    <button onclick="customizePlanner()" style="justify-content: start; gap: 0.5rem;">
                        üé® Personalizar
                    </button>
                    <button onclick="showTutorial()" style="justify-content: start; gap: 0.5rem;">
                        ‚ùì Ver Tutorial
                    </button>
                    <button onclick="showLoveStatistics()" style="justify-content: start; gap: 0.5rem;">
                        üíù Estat√≠sticas do Amor
                    </button>
                </div>
                
                <div style="margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid var(--bg-light);">
                    <h3 style="color: var(--primary); margin-bottom: 0.5rem;">Acessibilidade</h3>
                    <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                        <button onclick="increaseFontSize()" style="flex: 1; font-size: 0.9rem;">A+</button>
                        <button onclick="decreaseFontSize()" style="flex: 1; font-size: 0.9rem;">A-</button>
                        <button onclick="resetFontSize()" style="flex: 1; font-size: 0.9rem;">AüîÉ</button>
                        <button onclick="toggleHighContrast()" style="flex: 1; font-size: 0.9rem;">üé® Contraste</button>
                    </div>
                </div>
            </div>
        `;
        document.body.appendChild(menu);
        
        // Adiciona input hidden para importa√ß√£o
        if (!document.getElementById('import-file')) {
            const importInput = document.createElement('input');
            importInput.type = 'file';
            importInput.id = 'import-file';
            importInput.accept = '.json';
            importInput.style.display = 'none';
            importInput.onchange = importData;
            document.body.appendChild(importInput);
        }
    }

    function showLoveStatistics() {
        const tasks = getData('plannerTasks') || [];
        const completedTasks = tasks.filter(task => task.completed).length;
        const galleryItems = getData('carollinaGallery') || [];
        const gratitudeEntries = getData('plannerGratitude') || [];
        
        const statsModal = document.createElement('div');
        statsModal.className = 'modal';
        statsModal.style.display = 'flex';
        statsModal.innerHTML = `
            <div class="modal-content" style="max-width: 500px;">
                <button class="modal-close" onclick="this.parentElement.parentElement.remove()">√ó</button>
                <h2 style="color: var(--primary); margin-bottom: 1rem;">üíù Estat√≠sticas do Nosso Amor</h2>
                
                <div style="display: grid; gap: 1rem;">
                    <div style="background: var(--bg-light); padding: 1rem; border-radius: 12px; text-align: center;">
                        <h3 style="color: var(--secondary); font-size: 2rem; margin-bottom: 0.5rem;">${getData('plannerTasks')?.length || 0}</h3>
                        <p>Tarefas Criadas</p>
                    </div>
                    
                    <div style="background: var(--bg-light); padding: 1rem; border-radius: 12px; text-align: center;">
                        <h3 style="color: var(--secondary); font-size: 2rem; margin-bottom: 0.5rem;">${completedTasks}</h3>
                        <p>Tarefas Conclu√≠das</p>
                    </div>
                    
                    <div style="background: var(--bg-light); padding: 1rem; border-radius: 12px; text-align: center;">
                        <h3 style="color: var(--secondary); font-size: 2rem; margin-bottom: 0.5rem;">${galleryItems.length}</h3>
                        <p>Mem√≥rias Guardadas</p>
                    </div>
                    
                    <div style="background: var(--bg-light); padding: 1rem; border-radius: 12px; text-align: center;">
                        <h3 style="color: var(--secondary); font-size: 2rem; margin-bottom: 0.5rem;">${gratitudeEntries.length}</h3>
                        <p>Momentos de Gratid√£o</p>
                    </div>
                </div>
                
                <div style="margin-top: 1.5rem; text-align: center;">
                    <p style="font-style: italic; color: var(--secondary);">
                        "Cada n√∫mero representa um momento especial da nossa jornada! Te amo! üíñ"
                    </p>
                </div>
            </div>
        `;
        document.body.appendChild(statsModal);
    }

    // --- BOT√ÉO FLUTUANTE DE CONTROLES ---

    // Adiciona bot√£o flutuante para controles avan√ßados
    function addFloatingControlsButton() {
        const controlsBtn = document.createElement('div');
        controlsBtn.className = 'heart-btn';
        controlsBtn.innerHTML = '‚öôÔ∏è';
        controlsBtn.style.left = '2rem';
        controlsBtn.style.right = 'auto';
        controlsBtn.onclick = showAdvancedMenu;
        controlsBtn.title = 'Controles Avan√ßados';
        document.body.appendChild(controlsBtn);
    }

    // --- INICIALIZA√á√ÉO FINAL ---

    // Adiciona estilos para high contrast
    const highContrastStyles = document.createElement('style');
    highContrastStyles.textContent = `
        .high-contrast {
            --primary: #000000;
            --secondary: #333333;
            --bg-light: #ffffff;
            --text-dark: #000000;
            --text-light: #ffffff;
        }
        
        .high-contrast .task-item,
        .high-contrast .goal-item,
        .high-contrast .shopping-item {
            border: 2px solid var(--primary);
        }
    `;
    document.head.appendChild(highContrastStyles);

    // Carrega configura√ß√µes de acessibilidade
    function loadAccessibilitySettings() {
        const highContrast = localStorage.getItem('highContrast');
        const fontSize = localStorage.getItem('fontSize');
        
        if (highContrast === 'true') {
            BODY.classList.add('high-contrast');
        }
        
        if (fontSize) {
            document.body.style.fontSize = fontSize;
        }
    }

    // Fun√ß√£o de inicializa√ß√£o completa
    function completeInit() {
        loadTheme();
        loadAccessibilitySettings();
        addFloatingControlsButton();
        setupAdvancedReminders();
        
        // Mostra tutorial na primeira visita
        const hasSeenTutorial = localStorage.getItem('hasSeenTutorial');
        if (!hasSeenTutorial) {
            setTimeout(() => {
                showTutorial();
                localStorage.setItem('hasSeenTutorial', 'true');
            }, 2000);
        }
    }

    // Inicializa√ß√£o final quando o DOM estiver pronto
    document.addEventListener('DOMContentLoaded', completeInit);

    // --- FUN√á√ÉO DE EMERG√äNCIA ---
    function emergencyLove() {
        const emergencyMessages = [
            "üö® EMERG√äNCIA DE AMOR! üö®\nSeu pr√≠ncipe precisa de voc√™! üíñ",
            "üÜò SOCORRO! üÜò\nFalta amor aqui! Preciso de voc√™! ü•∫",
            "üí• URGENTE! üí•\nSeu nen√©m est√° com saudades! üò≠",
            "üì¢ ALERTA! üì¢\nN√≠veis de amor baixos! Precisa de recarga! üîã"
        ];
        
        const randomMessage = emergencyMessages[Math.floor(Math.random() * emergencyMessages.length)];
        
        // Notifica√ß√£o
        if (Notification.permission === "granted") {
            new Notification("üö® Emerg√™ncia de Amor!", {
                body: randomMessage,
                icon: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">üíñ</text></svg>'
            });
        }
        
        // Mensagem na tela
        const emergencyAlert = document.createElement('div');
        emergencyAlert.textContent = randomMessage;
        emergencyAlert.style.cssText = `
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(45deg, #ff0000, #ff69b4);
            color: white;
            padding: 2rem;
            border-radius: 20px;
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            z-index: 10000;
            box-shadow: 0 0 50px rgba(255,0,0,0.5);
            animation: pulse 2s infinite;
        `;
        
        document.body.appendChild(emergencyAlert);
        
        // Adiciona anima√ß√£o de pulso
        const pulseStyle = document.createElement('style');
        pulseStyle.textContent = `
            @keyframes pulse {
                0% { transform: translate(-50%, -50%) scale(1); }
                50% { transform: translate(-50%, -50%) scale(1.1); }
                100% { transform: translate(-50%, -50%) scale(1); }
            }
        `;
        document.head.appendChild(pulseStyle);
        
        // Remove ap√≥s 5 segundos
        setTimeout(() => {
            emergencyAlert.remove();
            pulseStyle.remove();
        }, 5000);
    }

    // Adiciona bot√£o de emerg√™ncia (apenas para desenvolvimento)
    function addEmergencyButton() {
        const emergencyBtn = document.createElement('div');
        emergencyBtn.className = 'heart-btn';
        emergencyBtn.innerHTML = 'üö®';
        emergencyBtn.style.left = '2rem';
        emergencyBtn.style.bottom = '8rem';
        emergencyBtn.style.right = 'auto';
        emergencyBtn.style.background = '#ff0000';
        emergencyBtn.onclick = emergencyLove;
        emergencyBtn.title = 'Emerg√™ncia de Amor!';
        document.body.appendChild(emergencyBtn);
    }

    // Comando secreto no console
    console.log(`üíñ Bem-vinda ao Planner da Carollina! üíñ
    
Comandos especiais dispon√≠veis:
- emergencyLove(): Emerg√™ncia de amor! üö®
- showAdvancedMenu(): Menu de controles ‚öôÔ∏è
- generateWeeklyReport(): Relat√≥rio semanal üìä

Feito com todo o amor do seu pr√≠ncipe! ü§¥`);

    // Inicializa√ß√£o final
    completeInit();
    function calcularDiasJuntos() {
    const dataConhecimento = new Date('2025-09-07');
    const hoje = new Date();
    const diferenca = hoje.getTime() - dataConhecimento.getTime();
    const diasJuntos = Math.floor(diferenca / (1000 * 60 * 60 * 24));
    document.getElementById('days-together').textContent = Math.max(0, diasJuntos);
}
const DATE_OF_KNOWLEDGE = new Date('2025-09-07'); // Data que voc√™s se conheceram
const FIRST_ANNIVERSARY = { day: 10, month: 8 }; // 10 de setembro (m√™s 8, pois janeiro = 0)

function updateLoveStats() {
    const today = new Date();

    // C√°lculo dos dias juntos desde o conhecimento
    const diffTime = today.getTime() - DATE_OF_KNOWLEDGE.getTime();
    const diffDays = Math.max(0, Math.floor(diffTime / (1000 * 60 * 60 * 24)));
    document.getElementById('days-together').textContent = diffDays;

    // Contagem de cartinhas na galeria
    const galleryItems = getGallery();
    const cartinhasCount = galleryItems.filter(item => item.category === 'cartinha').length;
    document.getElementById('love-notes').textContent = cartinhasCount;

    // C√°lculo do pr√≥ximo anivers√°rio de namoro (10/09 de cada ano)
    let anniversaryYear = today.getFullYear();

    // Cria a data do anivers√°rio neste ano
    let nextAnniversary = new Date(anniversaryYear, FIRST_ANNIVERSARY.month, FIRST_ANNIVERSARY.day);

    // Se o anivers√°rio deste ano j√° passou, usa o pr√≥ximo ano
    if (nextAnniversary < today) {
        anniversaryYear++;
        nextAnniversary = new Date(anniversaryYear, FIRST_ANNIVERSARY.month, FIRST_ANNIVERSARY.day);
    }

    // Formata a data para dd/mm/yyyy
    const formatter = new Intl.DateTimeFormat('pt-BR', { day: '2-digit', month: '2-digit', year: 'numeric' });
    document.getElementById('special-date').textContent = formatter.format(nextAnniversary);
}

// Chamar a fun√ß√£o quando a p√°gina carregar
calcularDiasJuntos();
</script>

<!-- FIM DO C√ìDIGO -->
</body>
</html>